{% assign themes = "dark,light" | split: "," %}
{% assign id = include.id %}
{% unless include.id %}
{% assign id = include.src | remove: "http://" |remove: "https://" | remove: ":"
%}
{% assign id = id | replace: "/","_" | replace: ".","_" %}
{% endunless %}

<div class="col">
  <figure class="">
    <img src="{{ include.src }}" />
    {% for th in themes %}
    <figcaption class="{{th}} btn-group btn-group-sm w-100">
      <button class="btn btn-sm btn-{{th}} text-start w-100 text-secondary"
        type="button" data-bs-toggle="offcanvas"
        data-bs-target="#detail_{{id}}_{{th}}">
        <i class="fa-solid fa-bars-staggered"
          style="--bs-text-opacity: .7;"></i>
        <span style="--bs-text-opacity: .1;">details</span>
      </button>
      <a class=" btn btn-sm btn-{{th}} text-end text-secondary"
        href="{{include.href | default: include.src}}" target="_blank">
        {% if include.href %}
        <i class="fa-solid fa-up-right-from-square"></i>
        {% else %}
        <i class="fa-solid fa-image"></i>
        {% endif %}
      </a>
    </figcaption>
    <div class="{{th}} offcanvas offcanvas-end" data-bs-backdrop="true"
      data-bs-scroll="true" data-bs-theme="{{th}}" tabindex="-1"
      id="detail_{{id}}_{{th}}">
      <div class="offcanvas-header">
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas"
          aria-label="Close"></button>
      </div>
      <div class="offcanvas-body text-secondary">
        <img src="{{ include.src }}" width="200" class="img-thumbnail" />
        {% if include.model %}
        <p class="p-2 border-top border-bottom border-secondary-subtle
          bg-{{th}}-subtle">
          <i class="fa-solid fa-microchip"></i>
          <b>model:</b> <span>{{include.model}}</span>
          {% if include.href %}
          <a href="{{include.href}}" target="_blank"
            class="badge text-reset border-bottom-0">
            <i class="fa-solid fa-up-right-from-square"></i>
          </a>
          {% endif %}
        </p>
        {% endif %}
        {% assign pclass = "px-2 border-bottom border-secondary-subtle " %}
        <!-- Midjourney -->
        {% if include.prompt_var %}
        <div>
          <h5 class="m-0 p-2 bg-body-secondary">
            <i class="fa-solid fa-feather-pointed"></i>
            prompt variation
          </h5>
          <p class="{{pclass}} bg-{{th}}-subtle">
            {{include.prompt_var}}
          </p>
        </div>
        {% endif %}
        {% if include.prompt %}
        <div>
          <h5 class="m-0 p-2 bg-body-secondary">
            <i class="fa-solid fa-feather-pointed"></i>
            prompt
          </h5>
          <p class="{{pclass}} bg-{{th}}-subtle">
            {{include.prompt}}
          </p>
        </div>
        {% endif %}
        {% if include.instruct %}
        <div>
          <h5 class="m-0 p-2 bg-body-secondary">
            <i class="fa-solid fa-feather-pointed"></i>
            instruction
          </h5>
          <p class="{{pclass}} bg-{{th}}-subtle">
            {{include.instruct}}
          </p>
        </div>
        {% endif %}
        <!-- DALL E & ChatGPT -->
        {% if include.instruct %}
        <div>
          <h5 class="m-0 p-2 bg-body-secondary">
            <i class="fa-solid fa-feather-pointed"></i>
            instruction
          </h5>
          <p class="{{pclass}} bg-{{th}}-subtle">
            {{include.instruct}}
          </p>
        </div>
        {% endif %}
        {% if include.chat_gpt %}
        <div>
          <h5 class="m-0 p-2 bg-body-secondary">
            <i class="fa-solid fa-wand-magic-sparkles"></i>
            prompt generated by ChatGPT
          </h5>
          <p class="{{pclass}} bg-{{th}}-subtle">
            {{include.chat_gpt}}
          </p>
        </div>
        {% endif %}
      </div>
    </div>
    {% endfor %}
  </figure>
</div>